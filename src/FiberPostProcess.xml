<?xml version="1.0" encoding="utf-8"?>
<executable>
   <category>Diffusion.FiberAnalysis</category>
   <title>Fiber Post Processing</title>
   <description>Removes fibers outside of a mask</description>
   <version>0.9.1</version>
   <contributor>Jean-Yves Yang</contributor>
   <parameters>

      <label>IO</label>
      <description>Input/Output parameters</description>

        <file>
           <name>inputFiberFileName</name>
           <longflag>inputFiberFileName</longflag>
           <label>Input Fiber File Name</label>
           <channel>input</channel>
           <flag>i</flag>
           <description>input fiber filename in .vtk or .vtp</description>
        </file>

        <geometry type="fiberbundle">
           <name>outputFiberFileName</name>
           <longflag>outputFiber</longflag>
           <label>Output Fiber File Name</label>
           <channel>output</channel>
           <flag>o</flag>
           <description>output fiber filename in .vtk or .vtp</description>
        </geometry>

        <image>
           <name>attributeFileName</name>
           <longflag>attributeFile</longflag>
           <label>Attribute File Name</label>
           <channel>input</channel>
           <flag>m</flag>
           <description>attribute filename in .nrrd, .nhdr, etc, such as a probability mask, or FA, MD, etc. Set by default as a binary mask. This parameter is used to crop the beginning and the end of each fiber or to mask the fiber bundle and remove any fiber considered outside of this mask (determined by the threshold parameter).</description>
        </image>

        <float>
           <name>threshold</name>
           <longflag>threshold</longflag>
           <label>Threshold value</label>
           <channel>input</channel>
           <flag>t</flag>
           <description>Threshold value between 0 and 1. If the percentage of the fiber outside of the mask is above this value, the fiber is removed.</description>
        </float>

        <boolean>
           <name>visualisationFlag</name>
           <longflag>visualize</longflag>
           <label>Write a visualizable output file (file name = outputfileName + "-visu")</label>
           <channel>input</channel>
           <description>If toggled, enable to visualize which parts of the fiber bundles are outside of the mask.</description>
        </boolean>

        <boolean>
           <name>cleanFlag</name>
           <longflag>clean</longflag>
           <label>Output file contains the fiber bundle cropped if a mask has been given as an input.</label>
           <channel>input</channel>
           <description>If toggled, the output file is a fiber bundle cropped. If not, the fiber file contains the same fiber bundle than the input, with appended cell datas and point datas.</description>
        </boolean>

   </parameters>

</executable>
